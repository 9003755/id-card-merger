# OCR API 故障排除指南

## 问题：获取访问令牌失败

### 症状
- 点击"开始OCR识别"后提示"获取访问令牌失败"
- 测试API连接时显示连接失败
- 控制台出现网络或API相关错误

### 解决步骤

#### 1. 使用内置测试功能
1. 进入"OCR批处理模式"
2. 点击"测试API连接"按钮
3. 查看具体的错误信息：
   - ✅ 连接成功：API配置正常
   - ❌ 连接失败：查看具体错误原因

#### 2. 网络连接检查
- **检查互联网连接**：确保能够正常访问外网
- **防火墙设置**：检查是否阻止了对百度API的访问
- **代理设置**：如果使用代理，确保配置正确
- **DNS解析**：尝试访问 `https://aip.baidubce.com` 检查域名解析

#### 3. API密钥验证
如果使用自定义API密钥：
- 登录[百度智能云控制台](https://console.bce.baidu.com/)
- 进入"人工智能" → "文字识别"
- 检查应用状态是否正常
- 确认API Key和Secret Key复制正确
- 检查应用是否有调用权限

#### 4. API配额检查
- **每日调用次数**：免费版每天有调用限制
- **账户余额**：确保账户有足够余额
- **服务状态**：检查百度智能云服务是否正常

#### 5. 浏览器问题
- **清除缓存**：清理浏览器缓存和Cookie
- **禁用扩展**：临时禁用浏览器扩展
- **尝试其他浏览器**：使用Chrome、Firefox或Edge测试
- **开发者工具**：查看Network面板的具体错误

### 常见错误代码

| 错误信息 | 可能原因 | 解决方案 |
|---------|---------|---------|
| `invalid_client` | API Key错误 | 检查API Key是否正确 |
| `invalid_request` | 请求格式错误 | 刷新页面重试 |
| `网络连接失败` | 网络问题 | 检查网络连接和防火墙 |
| `API错误: 110` | Access Token无效 | 重新获取令牌 |
| `API错误: 18` | QPS超限制 | 降低请求频率 |

### 技术细节

百度OCR API调用流程：
1. 使用API Key和Secret Key获取Access Token
2. 使用Access Token调用身份证识别接口
3. 解析返回的识别结果

### 联系支持

如果问题仍然存在：
1. 记录具体的错误信息
2. 截图保存错误提示
3. 联系项目维护者或百度技术支持

---

**注意**: 预配置的API密钥已经过测试，如果仍有问题，可能是网络环境或浏览器相关问题。