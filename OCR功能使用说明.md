# OCR批处理功能使用说明

**功能描述**: 新增的OCR批处理模块可以自动识别身份证上的姓名，并用"姓名+身份证"的格式为PDF文件命名，支持批量处理和压缩包下载。

## 功能特性

### 1. 百度OCR身份证识别
- 支持身份证正面姓名和身份证号识别
- 高精度文字识别，返回置信度
- 自动生成基于姓名的文件名

### 2. 批量处理能力
- 支持同时上传多张身份证图片
- 批量OCR识别，显示实时进度
- 自动命名：`{姓名}_身份证.pdf`
- 失败重试和错误处理

### 3. PDF生成和打包
- 使用OCR识别结果自动命名PDF文件
- 批量生成PDF并打包成ZIP文件
- 支持自定义压缩包文件名

## 使用步骤

### 第一步：检查和测试API配置
1. 点击"OCR批处理模式"选项卡
2. 系统已预配置百度OCR API密钥
3. 配置状态显示为"已配置"，可直接使用
4. **建议点击"测试API连接"按钮验证API是否正常**
5. 如需使用自己的API密钥，可以修改配置

### 第二步：上传身份证图片
1. 拖拽身份证图片到上传区域
2. 或点击上传区域选择文件
3. 支持JPG、PNG、WebP格式，单个文件不超过10MB
4. 可同时上传多张图片

### 第三步：执行OCR识别
1. 点击"开始OCR识别"按钮
2. 系统会逐一识别每张身份证
3. 显示识别进度和结果：
   - 姓名
   - 身份证号  
   - 置信度
   - 自动生成的PDF文件名

### 第四步：生成PDF并下载
1. 设置压缩包文件名（可选）
2. 点击"生成PDF并打包下载"按钮
3. 系统会自动生成PDF并打包成ZIP文件下载

## 百度OCR API配置

### 预配置说明
✅ **系统已预配置百度OCR API密钥，可直接使用！**

如果您希望使用自己的API密钥，可以按以下步骤操作：

### 获取API密钥
1. 访问[百度智能云](https://cloud.baidu.com/)
2. 注册/登录账号
3. 进入控制台 → 人工智能 → 文字识别
4. 创建应用获取API Key和Secret Key

### API使用限制
- 免费版每天有一定的调用次数限制
- 建议在高峰期避免频繁调用
- 支持身份证正反面识别

## 注意事项

### 图片要求
- 图片清晰，文字可见
- 身份证完整，无遮挡
- 光线充足，避免反光
- 建议图片大小在1-5MB之间

### 识别准确性
- 系统会显示置信度，建议关注低置信度结果
- 对于识别失败的图片，可以重新上传
- 支持手动删除识别错误的项目

### 文件命名规则
- 成功识别：`{姓名}_身份证.pdf`
- 识别失败：`身份证_{序号}.pdf`
- 自动过滤文件名中的非法字符

### 错误排查步骤

如果出现"获取访问令牌失败"错误，请按以下步骤排查：

1. **测试API连接**
   - 点击"测试API连接"按钮
   - 查看连接状态和错误信息

2. **检查网络连接**
   - 确保能够访问互联网
   - 检查防火墙或代理设置

3. **检查API密钥**
   - 确认API Key和Secret Key格式正确
   - 登录百度智能云检查密钥状态

4. **检查API额度**
   - 确认没有超出每日调用次数限制
   - 检查账户余额和服务状态

## 常见错误及解决方案

1. **配置状态显示"未配置"**
   - 检查API Key和Secret Key是否正确输入
   - 确认密钥是否有效

2. **OCR识别失败**
   - 检查网络连接
   - 确认图片清晰度
   - 检查API调用次数是否超限

3. **PDF生成失败**
   - 检查浏览器是否支持文件下载
   - 确认有足够的本地存储空间

## 技术特性

- **前端框架**: React + TypeScript + Vite
- **OCR服务**: 百度智能云文字识别API
- **PDF生成**: jsPDF库
- **文件压缩**: JSZip库
- **文件上传**: react-dropzone
- **响应式设计**: 支持移动端和桌面端

## 版本信息

- **版本**: 1.0.0
- **更新时间**: 2025-08-26
- **作者**: 海边的飞行器

---

如有问题或建议，请联系项目维护者。