# 身份证合并工具 - 部署指南

**修改时间**: 2025-08-26

## 部署方案

### 🚀 方案一：Vercel部署（推荐）

#### 优势
- ✅ 免费托管
- ✅ 自动部署
- ✅ 全球CDN
- ✅ 支持自定义域名
- ✅ HTTPS自动配置

#### 部署步骤

##### 1. 准备工作
```bash
# 确保项目可以正常构建
npm run build

# 检查dist目录是否生成
ls dist/
```

##### 2. 使用Vercel CLI部署
```bash
# 安装Vercel CLI
npm i -g vercel

# 登录Vercel
vercel login

# 部署项目
vercel

# 生产环境部署
vercel --prod
```

##### 3. 使用Vercel Web界面部署
1. 访问 https://vercel.com
2. 登录GitHub账号
3. 点击"New Project"
4. 导入GitHub仓库
5. 配置构建设置：
   - Framework Preset: Vite
   - Build Command: `npm run build`
   - Output Directory: `dist`
6. 点击Deploy

#### 配置文件
项目已包含 `vercel.json` 配置文件：
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "installCommand": "npm install"
}
```

---

### 🌟 方案二：Netlify部署

#### 部署步骤
1. 访问 https://netlify.com
2. 登录GitHub账号
3. 点击"New site from Git"
4. 选择GitHub仓库
5. 配置构建设置：
   - Build command: `npm run build`
   - Publish directory: `dist`
6. 点击Deploy

---

### 📚 方案三：GitHub Pages部署

#### 1. 创建部署脚本
```bash
# 在package.json中添加部署脚本
"scripts": {
  "deploy": "npm run build && npx gh-pages -d dist"
}
```

#### 2. 安装gh-pages
```bash
npm install --save-dev gh-pages
```

#### 3. 配置vite.config.ts
```typescript
export default defineConfig({
  plugins: [react()],
  base: '/仓库名/',
})
```

#### 4. 部署
```bash
npm run deploy
```

---

### 🐳 方案四：Docker部署

#### 1. 创建Dockerfile
```dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### 2. 创建nginx.conf
```nginx
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;

        location / {
            try_files $uri $uri/ /index.html;
        }
    }
}
```

#### 3. 构建和运行
```bash
# 构建镜像
docker build -t id-card-merger .

# 运行容器
docker run -p 80:80 id-card-merger
```

---

## 环境变量配置

项目当前不需要环境变量，所有功能都在前端实现。

## 性能优化

### 1. 代码分割
项目已配置自动代码分割，大型依赖库会被分离到独立的chunk。

### 2. 资源压缩
- CSS/JS自动压缩
- 图片资源优化
- Gzip压缩

### 3. CDN加速
建议使用CDN进行全球加速：
- Vercel：自带全球CDN
- Netlify：自带全球CDN
- Cloudflare：可配置CDN

## 域名配置

### 自定义域名
1. 在DNS提供商添加CNAME记录
2. 在部署平台配置自定义域名
3. 等待SSL证书自动配置

### 示例配置
```
类型: CNAME
名称: id-card-merger
值: your-project.vercel.app
```

## 监控和分析

### 推荐工具
- Google Analytics：用户行为分析
- Vercel Analytics：性能监控
- Sentry：错误监控

## 部署检查清单

- [ ] 项目可以正常构建（npm run build）
- [ ] 所有功能在生产环境正常工作
- [ ] 图片上传功能正常
- [ ] PDF生成功能正常
- [ ] 压缩包下载功能正常
- [ ] 响应式设计在移动端正常
- [ ] HTTPS配置完成
- [ ] 自定义域名配置完成（如需要）

## 常见问题

### Q: 为什么上传的图片无法显示？
A: 检查CORS配置，确保静态资源可以正常访问。

### Q: PDF生成失败？
A: 检查jsPDF库是否正确加载，确保没有网络问题。

### Q: 部署后页面空白？
A: 检查base路径配置，确保资源路径正确。

## 推荐部署平台

1. **Vercel** - 最佳选择，免费且功能完整
2. **Netlify** - 备选方案，同样优秀
3. **GitHub Pages** - 如果代码托管在GitHub
4. **自建服务器** - 如果需要完全控制

## 成本预估

- **Vercel Free**: 免费，包含100GB带宽
- **Netlify Free**: 免费，包含100GB带宽
- **GitHub Pages**: 完全免费
- **VPS部署**: $5-20/月

## 技术支持

如有部署问题，请检查：
1. 构建日志
2. 浏览器控制台错误
3. 网络连接
4. 依赖包版本兼容性